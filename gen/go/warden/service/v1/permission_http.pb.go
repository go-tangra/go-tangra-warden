// Code generated by protoc-gen-go-http. DO NOT EDIT.
// versions:
// - protoc-gen-go-http v2.9.2
// - protoc             (unknown)
// source: warden/service/v1/permission.proto

package wardenpb

import (
	context "context"
	http "github.com/go-kratos/kratos/v2/transport/http"
	binding "github.com/go-kratos/kratos/v2/transport/http/binding"
	emptypb "google.golang.org/protobuf/types/known/emptypb"
)

// This is a compile-time assertion to ensure that this generated file
// is compatible with the kratos package it is being compiled against.
var _ = new(context.Context)
var _ = binding.EncodeURL

const _ = http.SupportPackageIsVersion1

const OperationWardenPermissionServiceCheckAccess = "/warden.service.v1.WardenPermissionService/CheckAccess"
const OperationWardenPermissionServiceGetEffectivePermissions = "/warden.service.v1.WardenPermissionService/GetEffectivePermissions"
const OperationWardenPermissionServiceGrantAccess = "/warden.service.v1.WardenPermissionService/GrantAccess"
const OperationWardenPermissionServiceListAccessibleResources = "/warden.service.v1.WardenPermissionService/ListAccessibleResources"
const OperationWardenPermissionServiceListPermissions = "/warden.service.v1.WardenPermissionService/ListPermissions"
const OperationWardenPermissionServiceRevokeAccess = "/warden.service.v1.WardenPermissionService/RevokeAccess"

type WardenPermissionServiceHTTPServer interface {
	// CheckAccess Check if a subject has access to a resource
	CheckAccess(context.Context, *CheckAccessRequest) (*CheckAccessResponse, error)
	// GetEffectivePermissions Get effective permissions for a subject on a resource
	GetEffectivePermissions(context.Context, *GetEffectivePermissionsRequest) (*GetEffectivePermissionsResponse, error)
	// GrantAccess Grant access to a resource
	GrantAccess(context.Context, *GrantAccessRequest) (*GrantAccessResponse, error)
	// ListAccessibleResources List resources accessible by a subject
	ListAccessibleResources(context.Context, *ListAccessibleResourcesRequest) (*ListAccessibleResourcesResponse, error)
	// ListPermissions List permissions on a resource
	ListPermissions(context.Context, *ListPermissionsRequest) (*ListPermissionsResponse, error)
	// RevokeAccess Revoke access from a resource
	RevokeAccess(context.Context, *RevokeAccessRequest) (*emptypb.Empty, error)
}

func RegisterWardenPermissionServiceHTTPServer(s *http.Server, srv WardenPermissionServiceHTTPServer) {
	r := s.Route("/")
	r.POST("/v1/permissions", _WardenPermissionService_GrantAccess0_HTTP_Handler(srv))
	r.DELETE("/v1/permissions", _WardenPermissionService_RevokeAccess0_HTTP_Handler(srv))
	r.GET("/v1/permissions", _WardenPermissionService_ListPermissions0_HTTP_Handler(srv))
	r.POST("/v1/permissions/check", _WardenPermissionService_CheckAccess0_HTTP_Handler(srv))
	r.GET("/v1/permissions/accessible", _WardenPermissionService_ListAccessibleResources0_HTTP_Handler(srv))
	r.GET("/v1/permissions/effective", _WardenPermissionService_GetEffectivePermissions0_HTTP_Handler(srv))
}

func _WardenPermissionService_GrantAccess0_HTTP_Handler(srv WardenPermissionServiceHTTPServer) func(ctx http.Context) error {
	return func(ctx http.Context) error {
		var in GrantAccessRequest
		if err := ctx.Bind(&in); err != nil {
			return err
		}
		if err := ctx.BindQuery(&in); err != nil {
			return err
		}
		http.SetOperation(ctx, OperationWardenPermissionServiceGrantAccess)
		h := ctx.Middleware(func(ctx context.Context, req interface{}) (interface{}, error) {
			return srv.GrantAccess(ctx, req.(*GrantAccessRequest))
		})
		out, err := h(ctx, &in)
		if err != nil {
			return err
		}
		reply := out.(*GrantAccessResponse)
		return ctx.Result(200, reply)
	}
}

func _WardenPermissionService_RevokeAccess0_HTTP_Handler(srv WardenPermissionServiceHTTPServer) func(ctx http.Context) error {
	return func(ctx http.Context) error {
		var in RevokeAccessRequest
		if err := ctx.BindQuery(&in); err != nil {
			return err
		}
		http.SetOperation(ctx, OperationWardenPermissionServiceRevokeAccess)
		h := ctx.Middleware(func(ctx context.Context, req interface{}) (interface{}, error) {
			return srv.RevokeAccess(ctx, req.(*RevokeAccessRequest))
		})
		out, err := h(ctx, &in)
		if err != nil {
			return err
		}
		reply := out.(*emptypb.Empty)
		return ctx.Result(200, reply)
	}
}

func _WardenPermissionService_ListPermissions0_HTTP_Handler(srv WardenPermissionServiceHTTPServer) func(ctx http.Context) error {
	return func(ctx http.Context) error {
		var in ListPermissionsRequest
		if err := ctx.BindQuery(&in); err != nil {
			return err
		}
		http.SetOperation(ctx, OperationWardenPermissionServiceListPermissions)
		h := ctx.Middleware(func(ctx context.Context, req interface{}) (interface{}, error) {
			return srv.ListPermissions(ctx, req.(*ListPermissionsRequest))
		})
		out, err := h(ctx, &in)
		if err != nil {
			return err
		}
		reply := out.(*ListPermissionsResponse)
		return ctx.Result(200, reply)
	}
}

func _WardenPermissionService_CheckAccess0_HTTP_Handler(srv WardenPermissionServiceHTTPServer) func(ctx http.Context) error {
	return func(ctx http.Context) error {
		var in CheckAccessRequest
		if err := ctx.Bind(&in); err != nil {
			return err
		}
		if err := ctx.BindQuery(&in); err != nil {
			return err
		}
		http.SetOperation(ctx, OperationWardenPermissionServiceCheckAccess)
		h := ctx.Middleware(func(ctx context.Context, req interface{}) (interface{}, error) {
			return srv.CheckAccess(ctx, req.(*CheckAccessRequest))
		})
		out, err := h(ctx, &in)
		if err != nil {
			return err
		}
		reply := out.(*CheckAccessResponse)
		return ctx.Result(200, reply)
	}
}

func _WardenPermissionService_ListAccessibleResources0_HTTP_Handler(srv WardenPermissionServiceHTTPServer) func(ctx http.Context) error {
	return func(ctx http.Context) error {
		var in ListAccessibleResourcesRequest
		if err := ctx.BindQuery(&in); err != nil {
			return err
		}
		http.SetOperation(ctx, OperationWardenPermissionServiceListAccessibleResources)
		h := ctx.Middleware(func(ctx context.Context, req interface{}) (interface{}, error) {
			return srv.ListAccessibleResources(ctx, req.(*ListAccessibleResourcesRequest))
		})
		out, err := h(ctx, &in)
		if err != nil {
			return err
		}
		reply := out.(*ListAccessibleResourcesResponse)
		return ctx.Result(200, reply)
	}
}

func _WardenPermissionService_GetEffectivePermissions0_HTTP_Handler(srv WardenPermissionServiceHTTPServer) func(ctx http.Context) error {
	return func(ctx http.Context) error {
		var in GetEffectivePermissionsRequest
		if err := ctx.BindQuery(&in); err != nil {
			return err
		}
		http.SetOperation(ctx, OperationWardenPermissionServiceGetEffectivePermissions)
		h := ctx.Middleware(func(ctx context.Context, req interface{}) (interface{}, error) {
			return srv.GetEffectivePermissions(ctx, req.(*GetEffectivePermissionsRequest))
		})
		out, err := h(ctx, &in)
		if err != nil {
			return err
		}
		reply := out.(*GetEffectivePermissionsResponse)
		return ctx.Result(200, reply)
	}
}

type WardenPermissionServiceHTTPClient interface {
	// CheckAccess Check if a subject has access to a resource
	CheckAccess(ctx context.Context, req *CheckAccessRequest, opts ...http.CallOption) (rsp *CheckAccessResponse, err error)
	// GetEffectivePermissions Get effective permissions for a subject on a resource
	GetEffectivePermissions(ctx context.Context, req *GetEffectivePermissionsRequest, opts ...http.CallOption) (rsp *GetEffectivePermissionsResponse, err error)
	// GrantAccess Grant access to a resource
	GrantAccess(ctx context.Context, req *GrantAccessRequest, opts ...http.CallOption) (rsp *GrantAccessResponse, err error)
	// ListAccessibleResources List resources accessible by a subject
	ListAccessibleResources(ctx context.Context, req *ListAccessibleResourcesRequest, opts ...http.CallOption) (rsp *ListAccessibleResourcesResponse, err error)
	// ListPermissions List permissions on a resource
	ListPermissions(ctx context.Context, req *ListPermissionsRequest, opts ...http.CallOption) (rsp *ListPermissionsResponse, err error)
	// RevokeAccess Revoke access from a resource
	RevokeAccess(ctx context.Context, req *RevokeAccessRequest, opts ...http.CallOption) (rsp *emptypb.Empty, err error)
}

type WardenPermissionServiceHTTPClientImpl struct {
	cc *http.Client
}

func NewWardenPermissionServiceHTTPClient(client *http.Client) WardenPermissionServiceHTTPClient {
	return &WardenPermissionServiceHTTPClientImpl{client}
}

// CheckAccess Check if a subject has access to a resource
func (c *WardenPermissionServiceHTTPClientImpl) CheckAccess(ctx context.Context, in *CheckAccessRequest, opts ...http.CallOption) (*CheckAccessResponse, error) {
	var out CheckAccessResponse
	pattern := "/v1/permissions/check"
	path := binding.EncodeURL(pattern, in, false)
	opts = append(opts, http.Operation(OperationWardenPermissionServiceCheckAccess))
	opts = append(opts, http.PathTemplate(pattern))
	err := c.cc.Invoke(ctx, "POST", path, in, &out, opts...)
	if err != nil {
		return nil, err
	}
	return &out, nil
}

// GetEffectivePermissions Get effective permissions for a subject on a resource
func (c *WardenPermissionServiceHTTPClientImpl) GetEffectivePermissions(ctx context.Context, in *GetEffectivePermissionsRequest, opts ...http.CallOption) (*GetEffectivePermissionsResponse, error) {
	var out GetEffectivePermissionsResponse
	pattern := "/v1/permissions/effective"
	path := binding.EncodeURL(pattern, in, true)
	opts = append(opts, http.Operation(OperationWardenPermissionServiceGetEffectivePermissions))
	opts = append(opts, http.PathTemplate(pattern))
	err := c.cc.Invoke(ctx, "GET", path, nil, &out, opts...)
	if err != nil {
		return nil, err
	}
	return &out, nil
}

// GrantAccess Grant access to a resource
func (c *WardenPermissionServiceHTTPClientImpl) GrantAccess(ctx context.Context, in *GrantAccessRequest, opts ...http.CallOption) (*GrantAccessResponse, error) {
	var out GrantAccessResponse
	pattern := "/v1/permissions"
	path := binding.EncodeURL(pattern, in, false)
	opts = append(opts, http.Operation(OperationWardenPermissionServiceGrantAccess))
	opts = append(opts, http.PathTemplate(pattern))
	err := c.cc.Invoke(ctx, "POST", path, in, &out, opts...)
	if err != nil {
		return nil, err
	}
	return &out, nil
}

// ListAccessibleResources List resources accessible by a subject
func (c *WardenPermissionServiceHTTPClientImpl) ListAccessibleResources(ctx context.Context, in *ListAccessibleResourcesRequest, opts ...http.CallOption) (*ListAccessibleResourcesResponse, error) {
	var out ListAccessibleResourcesResponse
	pattern := "/v1/permissions/accessible"
	path := binding.EncodeURL(pattern, in, true)
	opts = append(opts, http.Operation(OperationWardenPermissionServiceListAccessibleResources))
	opts = append(opts, http.PathTemplate(pattern))
	err := c.cc.Invoke(ctx, "GET", path, nil, &out, opts...)
	if err != nil {
		return nil, err
	}
	return &out, nil
}

// ListPermissions List permissions on a resource
func (c *WardenPermissionServiceHTTPClientImpl) ListPermissions(ctx context.Context, in *ListPermissionsRequest, opts ...http.CallOption) (*ListPermissionsResponse, error) {
	var out ListPermissionsResponse
	pattern := "/v1/permissions"
	path := binding.EncodeURL(pattern, in, true)
	opts = append(opts, http.Operation(OperationWardenPermissionServiceListPermissions))
	opts = append(opts, http.PathTemplate(pattern))
	err := c.cc.Invoke(ctx, "GET", path, nil, &out, opts...)
	if err != nil {
		return nil, err
	}
	return &out, nil
}

// RevokeAccess Revoke access from a resource
func (c *WardenPermissionServiceHTTPClientImpl) RevokeAccess(ctx context.Context, in *RevokeAccessRequest, opts ...http.CallOption) (*emptypb.Empty, error) {
	var out emptypb.Empty
	pattern := "/v1/permissions"
	path := binding.EncodeURL(pattern, in, true)
	opts = append(opts, http.Operation(OperationWardenPermissionServiceRevokeAccess))
	opts = append(opts, http.PathTemplate(pattern))
	err := c.cc.Invoke(ctx, "DELETE", path, nil, &out, opts...)
	if err != nil {
		return nil, err
	}
	return &out, nil
}
